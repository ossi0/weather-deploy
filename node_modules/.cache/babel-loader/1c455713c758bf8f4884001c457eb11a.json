{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ossi Laurila\\\\Desktop\\\\weatherapp\\\\src\\\\index.js\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport Navigation from \"./components/navigation\";\nimport Searchbar from \"./components/searchbar\";\nimport asemat from \"./asemat\";\nimport Datatable from \"./components/datatable\";\nimport Tempgraph from \"./components/tempgraph\";\nimport Snowgraph from \"./components/snowgraph\";\nimport * as d3 from \"d3\";\nvar timevaluepairshot;\nvar timevaluepairscold;\nvar chartstation; // Alkuperäinen datankäsittelijäfunktio jota kutsutaan searchbar-komponentista.\n// Palauttaa datan luettavaan muotoon datatablen table-elementtiin\n// Tämän kutsuu searchbar-komnponentin handleOptionClick-funktio\n\nexport function showData(d) {\n  timevaluepairshot = d.locations[0].data.tmax.timeValuePairs;\n  timevaluepairscold = d.locations[0].data.tmin.timeValuePairs;\n  chartstation = d.locations[0].info.name; // Koko vuoden max- ja mintemp erillisiksi funktioiksi\n\n  var maxtemp = timevaluepairshot.reduce((init, currentvalue, currentindex) => {\n    return init.value < currentvalue.value ? currentvalue : init;\n  });\n  var mintemp = timevaluepairscold.reduce((init, currentvalue, currentindex) => {\n    return init.value > currentvalue.value ? currentvalue : init;\n  });\n  var lastmonthmax = lastMonthMax(timevaluepairshot);\n  var lastmonthmin = lastMonthMin(timevaluepairscold);\n  var lastweekmax = lastWeekMax(timevaluepairshot);\n  var lastweekmin = lastWeekMin(timevaluepairscold); // Palauttaa span-elementin, jossa lämpötilaa vastaava päivämäärä on väriltään MUSTALLA\n\n  function Nodes(txt) {\n    var node = document.createTextNode(txt);\n    var span = document.createElement(\"span\");\n    span.style.color = \"black\";\n    span.appendChild(node);\n    return span;\n  }\n\n  document.getElementById(\"last-365-days-hot\").textContent = maxtemp.value.toFixed(1);\n  document.getElementById(\"last-365-days-hot\").appendChild(Nodes(` (${new Date(maxtemp.time).getDate()}.${new Date(maxtemp.time).getMonth() + 1}.${new Date(maxtemp.time).getFullYear()})`));\n  document.getElementById(\"last-365-days-cold\").textContent = mintemp.value.toFixed(1);\n  document.getElementById(\"last-365-days-cold\").appendChild(Nodes(` (${new Date(mintemp.time).getDate()}.${new Date(mintemp.time).getMonth() + 1}.${new Date(mintemp.time).getFullYear()})`));\n  document.getElementById(\"last-30-days-hot\").textContent = lastmonthmax.value.toFixed(1);\n  document.getElementById(\"last-30-days-hot\").appendChild(Nodes(` (${new Date(lastmonthmax.time).getDate()}.${new Date(lastmonthmax.time).getMonth() + 1}.${new Date(lastmonthmax.time).getFullYear()})`));\n  document.getElementById(\"last-30-days-cold\").textContent = lastmonthmin.value.toFixed(1);\n  document.getElementById(\"last-30-days-cold\").appendChild(Nodes(` (${new Date(lastmonthmin.time).getDate()}.${new Date(lastmonthmin.time).getMonth() + 1}.${new Date(lastmonthmin.time).getFullYear()})`));\n  document.getElementById(\"last-7-days-hot\").textContent = lastweekmax.value.toFixed(1);\n  document.getElementById(\"last-7-days-hot\").appendChild(Nodes(` (${new Date(lastweekmax.time).getDate()}.${new Date(lastweekmax.time).getMonth() + 1}.${new Date(lastweekmax.time).getFullYear()})`));\n  document.getElementById(\"last-7-days-cold\").textContent = lastweekmin.value.toFixed(1);\n  document.getElementById(\"last-7-days-cold\").appendChild(Nodes(` (${new Date(lastweekmin.time).getDate()}.${new Date(lastweekmin.time).getMonth() + 1}.${new Date(lastweekmin.time).getFullYear()})`));\n  document.getElementById(\"last-day-hot\").textContent = timevaluepairshot[timevaluepairshot.length - 1].value.toFixed(1);\n  document.getElementById(\"last-day-hot\").appendChild(Nodes(` (${new Date(timevaluepairshot[timevaluepairshot.length - 1].time).getDate()}.${new Date(timevaluepairshot[timevaluepairshot.length - 1].time).getMonth() + 1}.${new Date(timevaluepairshot[timevaluepairshot.length - 1].time).getFullYear()})`));\n  document.getElementById(\"last-day-cold\").textContent = timevaluepairscold[timevaluepairscold.length - 1].value.toFixed(1);\n  document.getElementById(\"last-day-cold\").appendChild(Nodes(` (${new Date(timevaluepairscold[timevaluepairscold.length - 1].time).getDate()}.${new Date(timevaluepairscold[timevaluepairscold.length - 1].time).getMonth() + 1}.${new Date(timevaluepairscold[timevaluepairscold.length - 1].time).getFullYear()})`)); // Lopuksi kutsutaan kuvaajanpiirtäjäfunktio\n\n  drawGraph(timevaluepairshot.slice(timevaluepairshot.length - 90, timevaluepairshot.length), timevaluepairscold.slice(timevaluepairscold.length - 90, timevaluepairscold.length), chartstation);\n} // Tätä funktiota kutsutaan searchbar-komponentista. Funktio hakee str-parametria (käyttäjän syöttämä)\n// vastaavat tulokset asemat-muuttujasta (asemat.js) ja palauttaaa tulokset kutsuvan funktion käyttöön\n\nexport function returnStations(str) {\n  var matchList = [];\n  var searchRegex = new RegExp(str, \"i\");\n\n  if (str.length > 1) {\n    asemat.forEach((value, index) => {\n      if (searchRegex.test(value[0])) {\n        matchList.push(value);\n      }\n    });\n    return matchList;\n  } else {\n    asemat.forEach((value, index) => {\n      matchList.push(value);\n    });\n    return matchList;\n  }\n} // Piirtää lämpötilakuvaajan kun käyttäjä valitsee mittausaseman\n\nfunction drawGraph(hot, cold, station) {\n  ReactDOM.render( /*#__PURE__*/React.createElement(React.StrictMode, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navigation, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Searchbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Datatable, {\n    elements: Datatable.elements,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Tempgraph, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }\n  })), document.getElementById(\"root\")); // Tarkistetaan onko kuvaaja jo ennestään olemassa\n\n  if (document.getElementById(\"tempgraph\").children.length > 1) {\n    d3.select(\"svg\").remove();\n  } // set the dimensions and margins of the graph\n\n\n  var margin = {\n    top: 90,\n    right: 70,\n    bottom: 30,\n    left: 70\n  },\n      width = Math.max(window.innerWidth * 0.85, 550),\n      height = Math.max(window.innerHeight / 2, 450); // append the svg object to the body of the page\n\n  var svg = d3.select(\"#tempgraph\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).attr(\"id\", \"svg\").append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n  var x = d3.scaleTime().domain(d3.extent(hot, function (d) {\n    return d.time;\n  })).range([0, width]);\n  svg.append(\"g\").attr(\"transform\", \"translate(0,\" + height + \")\").call(d3.axisBottom(x).tickSize(-height).tickSizeOuter(0).tickFormat(d3.timeFormat(\"%b %d\")));\n  var y = d3.scaleLinear().domain([d3.min(cold, function (d) {\n    return +Math.floor(d.value);\n  }), d3.max(hot, function (d) {\n    return +Math.ceil(d.value);\n  })]).range([height, 0]);\n  svg.append(\"g\").call(d3.axisLeft(y).tickSize(-width).tickSizeOuter(0)); // tooltip-funktiot\n\n  var tdiv = d3.select(\"#tempgraph\").append('div').attr(\"id\", \"tooltip\").style(\"text-align\", \"left\").style(\"position\", \"absolute\").style(\"visibility\", \"hidden\").style(\"background-color\", \"white\").style(\"border\", \"solid\").style(\"border-width\", \"1px\").style(\"border-radius\", \"5px\").style(\"padding\", \"10px\").style(\"width\", \"max-content\");\n  var bisect = d3.bisector(function (d) {\n    return d.time;\n  }).left; // Create the circles that travels along the curve of chart\n\n  var focusHot = svg.append('g').append('circle').style(\"fill\", \"red\").attr(\"stroke\", \"none\").attr('r', 4).style(\"opacity\", 0);\n  var focusCold = svg.append('g').append('circle').style(\"fill\", \"blue\").attr(\"stroke\", \"none\").attr('r', 4).style(\"opacity\", 0); // Create a rect on top of the svg area: this rectangle recovers mouse position\n\n  svg.append('rect').style(\"fill\", \"none\").style(\"pointer-events\", \"all\").attr('width', width).attr('height', height).on('mouseover', () => {\n    focusHot.style(\"opacity\", 1);\n    focusCold.style(\"opacity\", 1);\n    d3.select(\"#tooltip\").style(\"visibility\", \"visible\");\n  }).on('mousemove', event => {\n    var coords = d3.pointer(event);\n    var x0 = x.invert(coords[0]).getTime();\n    var i = bisect(hot, x0);\n    focusHot.attr(\"cx\", x(hot[i].time)).attr(\"cy\", y(hot[i].value));\n    focusCold.attr(\"cx\", x(cold[i].time)).attr(\"cy\", y(cold[i].value));\n    d3.select(\"#tooltip\").html(`${new Date(hot[i].time).getDate()}.\n        ${new Date(hot[i].time).getMonth() + 1}.\n        ${new Date(hot[i].time).getFullYear()} \n        <br> Max: <font color=\"red\">${hot[i].value.toFixed(1)}</font> \n        <br> Min: <font color=\"blue\">${cold[i].value.toFixed(1)}</font>`).style('left', event.pageX + 10 + 'px').style('top', event.pageY - 100 + 'px');\n  }).on('mouseout', () => {\n    focusHot.style(\"opacity\", 0);\n    focusCold.style(\"opacity\", 0);\n    d3.select(\"#tooltip\").style(\"visibility\", \"hidden\");\n  }); // Add the line\n\n  svg.append(\"path\").datum(hot).attr(\"fill\", \"none\").attr(\"stroke\", \"red\").attr(\"stroke-width\", 1.5).attr(\"d\", d3.line().x(function (d) {\n    return x(d.time);\n  }).y(function (d) {\n    return y(d.value);\n  }));\n  svg.append(\"path\").datum(cold).attr(\"fill\", \"none\").attr(\"stroke\", \"blue\").attr(\"stroke-width\", 1.5).attr(\"d\", d3.line().x(function (d) {\n    return x(d.time);\n  }).y(function (d) {\n    return y(d.value);\n  }));\n  svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", margin.top / 2).attr(\"transform\", \"translate(0,\" + -90 + \")\").attr(\"text-anchor\", \"middle\").style(\"font-size\", \"24px\").style(\"text-decoration\", \"bold\").text(station);\n}\n\nexport function showSnow(d) {\n  var history = d.locations[0].data.snow.timeValuePairs;\n  var station = d.locations[0].info.name;\n  drawSnowGraph(history, station);\n}\n\nfunction drawSnowGraph(depth, title) {\n  ReactDOM.render( /*#__PURE__*/React.createElement(React.StrictMode, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navigation, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Searchbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Snowgraph, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 7\n    }\n  })), document.getElementById(\"root\")); // Tarkistetaan onko kuvaaja jo ennestään olemassa\n\n  if (document.getElementById(\"snowgraph\").children.length > 0) {\n    d3.select(\"svg\").remove();\n  } // set the dimensions and margins of the graph\n\n\n  var margin = {\n    top: 30,\n    right: 30,\n    bottom: 50,\n    left: 30\n  },\n      width = Math.max(window.innerWidth * 0.85, 550),\n      height = Math.max(window.innerHeight / 2, 460),\n      offset = width / depth.length / 2; // append the svg object to the body of the page\n\n  var svg = d3.select(\"#snowgraph\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n  var x = d3.scaleTime().domain(d3.extent(depth, function (d) {\n    return d.time;\n  })).range([0, width]);\n  svg.append(\"g\").attr(\"transform\", \"translate(\" + offset + \",\" + height + \")\").call(d3.axisBottom(x).tickFormat(d3.timeFormat(\"%b %d\"))).selectAll(\"text\").attr(\"transform\", \"translate(-10,0)rotate(-45)\").style(\"text-anchor\", \"end\");\n  var y = d3.scaleLinear().domain([0, d3.max(depth, function (d) {\n    return +Math.ceil(d.value);\n  })]).range([height, 0]);\n  svg.append(\"g\").call(d3.axisLeft(y));\n  svg.selectAll(\"mybar\").data(depth).enter().append(\"rect\").attr(\"x\", function (d) {\n    return x(d.time);\n  }).attr(\"y\", function (d) {\n    return y(d.value);\n  }).attr(\"width\", width / (depth.length + 1)).attr(\"height\", function (d) {\n    return height - y(d.value);\n  }).attr(\"fill\", \"#1c4cc7\");\n  svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", margin.top / 2).attr(\"text-anchor\", \"middle\").style(\"font-size\", \"24px\").style(\"text-decoration\", \"bold\").text(title);\n}\n\nfunction lastMonthMax(arr) {\n  return arr.slice(arr.length - new Date(new Date().getFullYear(), new Date().getMonth(), 0).getDate(), arr.length).reduce((init, currentvalue, currentindex) => {\n    return init.value < currentvalue.value ? currentvalue : init;\n  });\n}\n\nfunction lastMonthMin(arr) {\n  return arr.slice(arr.length - new Date(new Date().getFullYear(), new Date().getMonth(), 0).getDate(), arr.length).reduce((init, currentvalue, currentindex) => {\n    return init.value > currentvalue.value ? currentvalue : init;\n  });\n}\n\nfunction lastWeekMax(arr) {\n  return arr.slice(arr.length - 7, arr.length).reduce((init, currentvalue, currentindex) => {\n    return init.value < currentvalue.value ? currentvalue : init;\n  });\n}\n\nfunction lastWeekMin(arr) {\n  return arr.slice(arr.length - 7, arr.length).reduce((init, currentvalue, currentindex) => {\n    return init.value > currentvalue.value ? currentvalue : init;\n  });\n}\n\nexport function showMonthGraph() {\n  if (document.getElementById(\"tempgraph\").children.length > 1) {\n    d3.select(\"svg\").remove();\n    drawGraph(timevaluepairshot.slice(timevaluepairshot.length - 30, timevaluepairshot.length), timevaluepairscold.slice(timevaluepairscold.length - 30, timevaluepairscold.length), chartstation);\n  }\n}\nexport function showThreeMonthGraph() {\n  if (document.getElementById(\"tempgraph\").children.length > 1) {\n    d3.select(\"svg\").remove();\n    drawGraph(timevaluepairshot.slice(timevaluepairshot.length - 90, timevaluepairshot.length), timevaluepairscold.slice(timevaluepairscold.length - 90, timevaluepairscold.length), chartstation);\n  }\n}\nexport function showYearGraph() {\n  if (document.getElementById(\"tempgraph\").children.length > 1) {\n    d3.select(\"svg\").remove();\n    drawGraph(timevaluepairshot, timevaluepairscold, chartstation);\n  }\n}\nReactDOM.render( /*#__PURE__*/React.createElement(React.StrictMode, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 536,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(Navigation, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 537,\n    columnNumber: 5\n  }\n}), /*#__PURE__*/React.createElement(Searchbar, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 538,\n    columnNumber: 5\n  }\n}), /*#__PURE__*/React.createElement(Datatable, {\n  elements: Datatable.elements,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 539,\n    columnNumber: 5\n  }\n})), document.getElementById(\"root\"));","map":{"version":3,"sources":["C:/Users/Ossi Laurila/Desktop/weatherapp/src/index.js"],"names":["React","ReactDOM","Navigation","Searchbar","asemat","Datatable","Tempgraph","Snowgraph","d3","timevaluepairshot","timevaluepairscold","chartstation","showData","d","locations","data","tmax","timeValuePairs","tmin","info","name","maxtemp","reduce","init","currentvalue","currentindex","value","mintemp","lastmonthmax","lastMonthMax","lastmonthmin","lastMonthMin","lastweekmax","lastWeekMax","lastweekmin","lastWeekMin","Nodes","txt","node","document","createTextNode","span","createElement","style","color","appendChild","getElementById","textContent","toFixed","Date","time","getDate","getMonth","getFullYear","length","drawGraph","slice","returnStations","str","matchList","searchRegex","RegExp","forEach","index","test","push","hot","cold","station","render","elements","children","select","remove","margin","top","right","bottom","left","width","Math","max","window","innerWidth","height","innerHeight","svg","append","attr","x","scaleTime","domain","extent","range","call","axisBottom","tickSize","tickSizeOuter","tickFormat","timeFormat","y","scaleLinear","min","floor","ceil","axisLeft","tdiv","bisect","bisector","focusHot","focusCold","on","event","coords","pointer","x0","invert","getTime","i","html","pageX","pageY","datum","line","text","showSnow","history","snow","drawSnowGraph","depth","title","offset","selectAll","enter","arr","showMonthGraph","showThreeMonthGraph","showYearGraph"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport Navigation from \"./components/navigation\";\nimport Searchbar from \"./components/searchbar\";\nimport asemat from \"./asemat\";\nimport Datatable from \"./components/datatable\";\nimport Tempgraph from \"./components/tempgraph\";\nimport Snowgraph from \"./components/snowgraph\";\nimport * as d3 from \"d3\";\n\nvar timevaluepairshot;\nvar timevaluepairscold;\nvar chartstation;\n// Alkuperäinen datankäsittelijäfunktio jota kutsutaan searchbar-komponentista.\n// Palauttaa datan luettavaan muotoon datatablen table-elementtiin\n// Tämän kutsuu searchbar-komnponentin handleOptionClick-funktio\nexport function showData(d) {\n  timevaluepairshot = d.locations[0].data.tmax.timeValuePairs;\n  timevaluepairscold = d.locations[0].data.tmin.timeValuePairs;\n  chartstation = d.locations[0].info.name;\n  // Koko vuoden max- ja mintemp erillisiksi funktioiksi\n  var maxtemp = timevaluepairshot.reduce((init, currentvalue, currentindex) => {\n    return init.value < currentvalue.value ? currentvalue : init;\n  });\n  var mintemp = timevaluepairscold.reduce(\n    (init, currentvalue, currentindex) => {\n      return init.value > currentvalue.value ? currentvalue : init;\n    }\n  );\n  var lastmonthmax = lastMonthMax(timevaluepairshot);\n  var lastmonthmin = lastMonthMin(timevaluepairscold);\n  var lastweekmax = lastWeekMax(timevaluepairshot);\n  var lastweekmin = lastWeekMin(timevaluepairscold);\n\n  // Palauttaa span-elementin, jossa lämpötilaa vastaava päivämäärä on väriltään MUSTALLA\n  function Nodes(txt) {\n    var node = document.createTextNode(txt);\n    var span = document.createElement(\"span\");\n    span.style.color = \"black\";\n    span.appendChild(node);\n    return span;\n  }\n\n  document.getElementById(\n    \"last-365-days-hot\"\n  ).textContent = maxtemp.value.toFixed(1);\n  document\n    .getElementById(\"last-365-days-hot\")\n    .appendChild(\n      Nodes(\n        ` (${new Date(maxtemp.time).getDate()}.${new Date(maxtemp.time).getMonth() + 1\n        }.${new Date(maxtemp.time).getFullYear()})`\n      )\n    );\n\n  document.getElementById(\n    \"last-365-days-cold\"\n  ).textContent = mintemp.value.toFixed(1);\n  document\n    .getElementById(\"last-365-days-cold\")\n    .appendChild(\n      Nodes(\n        ` (${new Date(mintemp.time).getDate()}.${new Date(mintemp.time).getMonth() + 1\n        }.${new Date(mintemp.time).getFullYear()})`\n      )\n    );\n\n  document.getElementById(\n    \"last-30-days-hot\"\n  ).textContent = lastmonthmax.value.toFixed(1);\n  document\n    .getElementById(\"last-30-days-hot\")\n    .appendChild(\n      Nodes(\n        ` (${new Date(lastmonthmax.time).getDate()}.${new Date(lastmonthmax.time).getMonth() + 1\n        }.${new Date(lastmonthmax.time).getFullYear()})`\n      )\n    );\n\n  document.getElementById(\n    \"last-30-days-cold\"\n  ).textContent = lastmonthmin.value.toFixed(1);\n  document\n    .getElementById(\"last-30-days-cold\")\n    .appendChild(\n      Nodes(\n        ` (${new Date(lastmonthmin.time).getDate()}.${new Date(lastmonthmin.time).getMonth() + 1\n        }.${new Date(lastmonthmin.time).getFullYear()})`\n      )\n    );\n\n  document.getElementById(\n    \"last-7-days-hot\"\n  ).textContent = lastweekmax.value.toFixed(1);\n  document\n    .getElementById(\"last-7-days-hot\")\n    .appendChild(\n      Nodes(\n        ` (${new Date(lastweekmax.time).getDate()}.${new Date(lastweekmax.time).getMonth() + 1\n        }.${new Date(lastweekmax.time).getFullYear()})`\n      )\n    );\n\n  document.getElementById(\n    \"last-7-days-cold\"\n  ).textContent = lastweekmin.value.toFixed(1);\n  document\n    .getElementById(\"last-7-days-cold\")\n    .appendChild(\n      Nodes(\n        ` (${new Date(lastweekmin.time).getDate()}.${new Date(lastweekmin.time).getMonth() + 1\n        }.${new Date(lastweekmin.time).getFullYear()})`\n      )\n    );\n\n  document.getElementById(\"last-day-hot\").textContent = timevaluepairshot[\n    timevaluepairshot.length - 1\n  ].value.toFixed(1);\n  document\n    .getElementById(\"last-day-hot\")\n    .appendChild(\n      Nodes(\n        ` (${new Date(\n          timevaluepairshot[timevaluepairshot.length - 1].time\n        ).getDate()}.${new Date(\n          timevaluepairshot[timevaluepairshot.length - 1].time\n        ).getMonth() + 1\n        }.${new Date(\n          timevaluepairshot[timevaluepairshot.length - 1].time\n        ).getFullYear()})`\n      )\n    );\n\n  document.getElementById(\"last-day-cold\").textContent = timevaluepairscold[\n    timevaluepairscold.length - 1\n  ].value.toFixed(1);\n  document\n    .getElementById(\"last-day-cold\")\n    .appendChild(\n      Nodes(\n        ` (${new Date(\n          timevaluepairscold[timevaluepairscold.length - 1].time\n        ).getDate()}.${new Date(\n          timevaluepairscold[timevaluepairscold.length - 1].time\n        ).getMonth() + 1\n        }.${new Date(\n          timevaluepairscold[timevaluepairscold.length - 1].time\n        ).getFullYear()})`\n      )\n    );\n\n  // Lopuksi kutsutaan kuvaajanpiirtäjäfunktio\n  drawGraph(\n    timevaluepairshot.slice(\n      timevaluepairshot.length - 90,\n      timevaluepairshot.length\n    ),\n    timevaluepairscold.slice(\n      timevaluepairscold.length - 90,\n      timevaluepairscold.length\n    ),\n    chartstation\n  );\n}\n// Tätä funktiota kutsutaan searchbar-komponentista. Funktio hakee str-parametria (käyttäjän syöttämä)\n// vastaavat tulokset asemat-muuttujasta (asemat.js) ja palauttaaa tulokset kutsuvan funktion käyttöön\nexport function returnStations(str) {\n  var matchList = [];\n  var searchRegex = new RegExp(str, \"i\");\n  if (str.length > 1) {\n    asemat.forEach((value, index) => {\n      if (searchRegex.test(value[0])) {\n        matchList.push(value);\n      }\n    });\n    return matchList;\n  } else {\n    asemat.forEach((value, index) => {\n      matchList.push(value);\n    });\n    return matchList;\n  }\n}\n\n// Piirtää lämpötilakuvaajan kun käyttäjä valitsee mittausaseman\nfunction drawGraph(hot, cold, station) {\n  ReactDOM.render(\n    <React.StrictMode>\n      <Navigation />\n      <Searchbar />\n      <Datatable elements={Datatable.elements} />\n      <Tempgraph />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n  );\n\n  // Tarkistetaan onko kuvaaja jo ennestään olemassa\n  if (document.getElementById(\"tempgraph\").children.length > 1) {\n    d3.select(\"svg\").remove();\n  }\n  // set the dimensions and margins of the graph\n  var margin = { top: 90, right: 70, bottom: 30, left: 70 },\n    width = Math.max(window.innerWidth * 0.85, 550),\n    height = Math.max(window.innerHeight / 2, 450);\n\n  // append the svg object to the body of the page\n  var svg = d3\n    .select(\"#tempgraph\")\n    .append(\"svg\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .attr(\"id\", \"svg\")\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n  var x = d3\n    .scaleTime()\n    .domain(\n      d3.extent(hot, function (d) {\n        return d.time;\n      })\n    )\n    .range([0, width])\n\n  svg\n    .append(\"g\")\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\n    .call(d3.axisBottom(x).tickSize(-height).tickSizeOuter(0).tickFormat(d3.timeFormat(\"%b %d\")));\n\n  var y = d3\n    .scaleLinear()\n    .domain([\n      d3.min(cold, function (d) {\n        return +Math.floor(d.value);\n      }),\n      d3.max(hot, function (d) {\n        return +Math.ceil(d.value);\n      }),\n    ])\n    .range([height, 0]);\n\n  svg\n    .append(\"g\")\n    .call(d3.axisLeft(y).tickSize(-width).tickSizeOuter(0));\n\n  // tooltip-funktiot\n\n  var tdiv = d3.select(\"#tempgraph\")\n    .append('div')\n    .attr(\"id\", \"tooltip\")\n    .style(\"text-align\", \"left\")\n    .style(\"position\", \"absolute\")\n    .style(\"visibility\", \"hidden\")\n    .style(\"background-color\", \"white\")\n    .style(\"border\", \"solid\")\n    .style(\"border-width\", \"1px\")\n    .style(\"border-radius\", \"5px\")\n    .style(\"padding\", \"10px\")\n    .style(\"width\", \"max-content\")\n\n\n  var bisect = d3.bisector(function (d) { return d.time; }).left;\n\n  // Create the circles that travels along the curve of chart\n  var focusHot = svg\n    .append('g')\n    .append('circle')\n    .style(\"fill\", \"red\")\n    .attr(\"stroke\", \"none\")\n    .attr('r', 4)\n    .style(\"opacity\", 0)\n\n  var focusCold = svg\n    .append('g')\n    .append('circle')\n    .style(\"fill\", \"blue\")\n    .attr(\"stroke\", \"none\")\n    .attr('r', 4)\n    .style(\"opacity\", 0)\n\n  // Create a rect on top of the svg area: this rectangle recovers mouse position\n  svg\n    .append('rect')\n    .style(\"fill\", \"none\")\n    .style(\"pointer-events\", \"all\")\n    .attr('width', width)\n    .attr('height', height)\n    .on('mouseover', () => {\n      focusHot.style(\"opacity\", 1)\n      focusCold.style(\"opacity\", 1)\n      d3.select(\"#tooltip\").style(\"visibility\", \"visible\")\n    })\n\n    .on('mousemove', (event) => {\n      var coords = d3.pointer(event);\n      var x0 = x.invert(coords[0]).getTime();\n      var i = bisect(hot, x0);\n      focusHot\n        .attr(\"cx\", x(hot[i].time))\n        .attr(\"cy\", y(hot[i].value))\n      focusCold\n        .attr(\"cx\", x(cold[i].time))\n        .attr(\"cy\", y(cold[i].value))\n      d3.select(\"#tooltip\")\n        .html(`${new Date(hot[i].time).getDate()}.\n        ${(new Date(hot[i].time).getMonth() + 1)}.\n        ${new Date(hot[i].time).getFullYear()} \n        <br> Max: <font color=\"red\">${hot[i].value.toFixed(1)}</font> \n        <br> Min: <font color=\"blue\">${cold[i].value.toFixed(1)}</font>`)\n        .style('left', (event.pageX + 10) + 'px')\n        .style('top', (event.pageY - 100) + 'px')\n    })\n\n    .on('mouseout', () => {\n      focusHot.style(\"opacity\", 0)\n      focusCold.style(\"opacity\", 0)\n      d3.select(\"#tooltip\").style(\"visibility\", \"hidden\")\n    });\n\n  // Add the line\n  svg\n    .append(\"path\")\n    .datum(hot)\n    .attr(\"fill\", \"none\")\n    .attr(\"stroke\", \"red\")\n    .attr(\"stroke-width\", 1.5)\n    .attr(\n      \"d\",\n      d3\n        .line()\n        .x(function (d) {\n          return x(d.time);\n        })\n        .y(function (d) {\n          return y(d.value);\n        })\n    )\n\n  svg\n    .append(\"path\")\n    .datum(cold)\n    .attr(\"fill\", \"none\")\n    .attr(\"stroke\", \"blue\")\n    .attr(\"stroke-width\", 1.5)\n    .attr(\n      \"d\",\n      d3\n        .line()\n        .x(function (d) {\n          return x(d.time);\n        })\n        .y(function (d) {\n          return y(d.value);\n        })\n    );\n\n  svg.append(\"text\")\n    .attr(\"x\", (width / 2))\n    .attr(\"y\", margin.top / 2)\n    .attr(\"transform\", \"translate(0,\" + -90 + \")\")\n    .attr(\"text-anchor\", \"middle\")\n    .style(\"font-size\", \"24px\")\n    .style(\"text-decoration\", \"bold\")\n    .text(station);\n\n}\n\nexport function showSnow(d) {\n  var history = d.locations[0].data.snow.timeValuePairs;\n  var station = d.locations[0].info.name;\n  drawSnowGraph(history, station);\n}\n\nfunction drawSnowGraph(depth, title) {\n  ReactDOM.render(\n    <React.StrictMode>\n      <Navigation />\n      <Searchbar />\n      <Snowgraph />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n  );\n\n  // Tarkistetaan onko kuvaaja jo ennestään olemassa\n  if (document.getElementById(\"snowgraph\").children.length > 0) {\n    d3.select(\"svg\").remove();\n  }\n\n  // set the dimensions and margins of the graph\n  var margin = { top: 30, right: 30, bottom: 50, left: 30 },\n    width = Math.max(window.innerWidth * 0.85, 550),\n    height = Math.max(window.innerHeight / 2, 460),\n    offset = width / depth.length / 2;\n\n  // append the svg object to the body of the page\n  var svg = d3\n    .select(\"#snowgraph\")\n    .append(\"svg\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n\n  var x = d3\n    .scaleTime()\n    .domain(\n      d3.extent(depth, function (d) {\n        return d.time;\n      })\n    )\n    .range([0, width]);\n\n  svg\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + offset + \",\" + height + \")\")\n    .call(d3.axisBottom(x).tickFormat(d3.timeFormat(\"%b %d\")))\n    .selectAll(\"text\")\n    .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n    .style(\"text-anchor\", \"end\");\n\n  var y = d3\n    .scaleLinear()\n    .domain([0, d3.max(depth, function (d) {\n      return +Math.ceil(d.value);\n    })\n    ])\n    .range([height, 0]);\n\n  svg.append(\"g\").call(d3.axisLeft(y));\n\n  svg.selectAll(\"mybar\")\n    .data(depth)\n    .enter()\n    .append(\"rect\")\n    .attr(\"x\", function (d) { return x(d.time); })\n    .attr(\"y\", function (d) { return y(d.value); })\n    .attr(\"width\", width / (depth.length + 1))\n    .attr(\"height\", function (d) { return height - y(d.value); })\n    .attr(\"fill\", \"#1c4cc7\")\n\n  svg.append(\"text\")\n    .attr(\"x\", (width / 2))\n    .attr(\"y\", margin.top / 2)\n    .attr(\"text-anchor\", \"middle\")\n    .style(\"font-size\", \"24px\")\n    .style(\"text-decoration\", \"bold\")\n    .text(title);\n\n}\n\n\nfunction lastMonthMax(arr) {\n  return arr\n    .slice(\n      arr.length -\n      new Date(new Date().getFullYear(), new Date().getMonth(), 0).getDate(),\n      arr.length\n    )\n    .reduce((init, currentvalue, currentindex) => {\n      return init.value < currentvalue.value ? currentvalue : init;\n    });\n}\nfunction lastMonthMin(arr) {\n  return arr\n    .slice(\n      arr.length -\n      new Date(new Date().getFullYear(), new Date().getMonth(), 0).getDate(),\n      arr.length\n    )\n    .reduce((init, currentvalue, currentindex) => {\n      return init.value > currentvalue.value ? currentvalue : init;\n    });\n}\nfunction lastWeekMax(arr) {\n  return arr\n    .slice(arr.length - 7, arr.length)\n    .reduce((init, currentvalue, currentindex) => {\n      return init.value < currentvalue.value ? currentvalue : init;\n    });\n}\nfunction lastWeekMin(arr) {\n  return arr\n    .slice(arr.length - 7, arr.length)\n    .reduce((init, currentvalue, currentindex) => {\n      return init.value > currentvalue.value ? currentvalue : init;\n    });\n}\n\nexport function showMonthGraph() {\n  if (document.getElementById(\"tempgraph\").children.length > 1) {\n    d3.select(\"svg\").remove();\n\n    drawGraph(\n      timevaluepairshot.slice(\n        timevaluepairshot.length - 30,\n        timevaluepairshot.length\n      ),\n      timevaluepairscold.slice(\n        timevaluepairscold.length - 30,\n        timevaluepairscold.length\n      ),\n      chartstation\n    );\n  }\n}\n\nexport function showThreeMonthGraph() {\n  if (document.getElementById(\"tempgraph\").children.length > 1) {\n    d3.select(\"svg\").remove();\n\n    drawGraph(\n      timevaluepairshot.slice(\n        timevaluepairshot.length - 90,\n        timevaluepairshot.length\n      ),\n      timevaluepairscold.slice(\n        timevaluepairscold.length - 90,\n        timevaluepairscold.length\n      ),\n      chartstation\n    );\n  }\n}\n\nexport function showYearGraph() {\n  if (document.getElementById(\"tempgraph\").children.length > 1) {\n    d3.select(\"svg\").remove();\n\n    drawGraph(timevaluepairshot, timevaluepairscold, chartstation);\n  }\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <Navigation />\n    <Searchbar />\n    <Datatable elements={Datatable.elements} />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"]},"metadata":{},"sourceType":"module"}