{"ast":null,"code":"/**\r\n * This software may be freely distributed and used under the following MIT license:\r\n *\r\n * Copyright (c) 2017 Finnish Meteorological Institute\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n * software and associated documentation files (the \"Software\"), to deal in the\r\n * Software without restriction, including without limitation the rights to use,\r\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\r\n * Software, and to permit persons to whom the Software is furnished to do so,\r\n * subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\r\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\r\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\r\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF\r\n * CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\r\n * OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n */\n// Strict mode for whole file.\n\"use strict\"; // Requires jQuery, lodash\n\nvar jQuery = require('jquery');\n\nvar _ = require('lodash'); // import jQuery from 'jquery';\n// import _ from 'lodash';\n\n/**\r\n * Utils object provides API for general utility functions.\r\n *\r\n * There is no need to use {new} to create an instance of Utils.\r\n * Instead, use directly API functions provided by the object.\r\n */\n\n\nvar Utils = function () {\n  /**\r\n   * Avoid console errors in browsers that lack a console.\r\n   *\r\n   * See: https://github.com/h5bp/html5-boilerplate/blob/master/js/plugins.js\r\n   */\n  (function () {\n    var method;\n\n    var noop = function () {};\n\n    var methods = ['assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error', 'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log', 'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd', 'timeStamp', 'trace', 'warn'];\n    var length = methods.length;\n    var console = console || {};\n\n    while (length--) {\n      method = methods[length]; // Only stub undefined methods.\n\n      if (!console[method]) {\n        console[method] = noop;\n      }\n    }\n  })();\n  /**\r\n   * Function to set jQuery.browser information.\r\n   * See, http://stackoverflow.com/questions/14545023/jquery-1-9-browser-detection\r\n   *\r\n   * This function is called during the construction of this sigleton instance to make sure\r\n   * browser information is available.\r\n   */\n\n\n  (function () {\n    if (!jQuery.browser) {\n      var matched, browser; // Use of jQuery.browser is frowned upon.\n      // More details: http://api.jquery.com/jQuery.browser\n      // jQuery.uaMatch maintained for back-compat\n\n      jQuery.uaMatch = function (ua) {\n        ua = ua.toLowerCase();\n        var match = /(chrome)[ \\/]([\\w.]+)/.exec(ua) || /(webkit)[ \\/]([\\w.]+)/.exec(ua) || /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(ua) || /(msie) ([\\w.]+)/.exec(ua) || ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) || [];\n        return {\n          browser: match[1] || \"\",\n          version: match[2] || \"0\"\n        };\n      };\n\n      matched = jQuery.uaMatch(navigator.userAgent);\n      browser = {};\n\n      if (matched.browser) {\n        browser[matched.browser] = true;\n        browser.version = matched.version;\n      } // Chrome is Webkit, but Webkit is also Safari.\n\n\n      if (browser.chrome) {\n        browser.webkit = true;\n      } else if (browser.webkit) {\n        browser.safari = true;\n      }\n\n      jQuery.browser = browser;\n    }\n  })();\n  /**\r\n   * This function is called during the construction of this sigleton\r\n   * instance to provide at least a limited support for cross-domain request (XDR)\r\n   * when jQuery.ajax is used for IE 8 and 9.\r\n   *\r\n   * IE 6, 7, 8, and 9 do not support XHR2 CORS.\r\n   * It is not possible to make generalized cross-domain requests in these browsers.\r\n   * IE 8, 9 support an ActiveX control called XDomainRequest that only allows limited\r\n   * cross-domain requests compared to XHR2 CORS. IE 10 supports XHR2 CORS.\r\n   *\r\n   * For more information about this, see following links:\r\n   *    https://github.com/jaubourg/ajaxHooks/blob/master/src/xdr.js\r\n   *    http://stackoverflow.com/questions/14309037/ajax-no-transport-error-in-ie-8-9\r\n   *    http://bugs.jquery.com/ticket/8283#comment:43\r\n   *    http://bugs.jquery.com/ticket/8283#comment:44\r\n   *    http://bugs.jquery.com/ticket/8283#comment:45\r\n   *\r\n   * jQuery does not include XDomainRequest support because there are numerous\r\n   * and serious limitations to XDR. Many reasonable $.ajax requests would fail,\r\n   * including any cross-domain request made on IE6 and IE7 which are otherwise\r\n   * supported by jQuery. Developers would be confused that their content types\r\n   * and headers were ignored, or that IE8 users could not use XDR if the user was\r\n   * using InPrivate browsing for example.\r\n   *\r\n   * Even the crippled XDR can be useful if it is used by a knowledgeable developer.\r\n   * A jQuery team member has made an XDR ajax transport available. You must be aware\r\n   * of XDR limitations by reading this blog post or ask someone who has dealt with\r\n   * XDR problems and can mentor you through its successful use.\r\n   *\r\n   * For further help and other solutions, ask on the jQuery Forum, StackOverflow,\r\n   * or search \"jQuery xdr transport\".\r\n   */\n\n\n  (function () {\n    if (window.XDomainRequest) {\n      jQuery.ajaxTransport(function (s) {\n        if (s.crossDomain && s.async) {\n          if (s.timeout) {\n            s.xdrTimeout = s.timeout;\n            delete s.timeout;\n          }\n\n          var xdr;\n          return {\n            send: function (_, complete) {\n              function callback(status, statusText, responses, responseHeaders) {\n                xdr.onload = xdr.onerror = xdr.ontimeout = jQuery.noop;\n                xdr = undefined;\n                complete(status, statusText, responses, responseHeaders);\n              }\n\n              xdr = new XDomainRequest();\n\n              xdr.onload = function () {\n                callback(200, \"OK\", {\n                  text: xdr.responseText\n                }, \"Content-Type: \" + xdr.contentType);\n              };\n\n              xdr.onerror = function () {\n                callback(404, \"Not Found\");\n              };\n\n              xdr.onprogress = function () {// For some reason, XDomainRequest send does not seem to work properly with IE9\n                // when jQuery.noop is used for onprogress function and jQuery ajax requests are\n                // called inside an iframe. Therefore, separately defined empty function is set\n                // here to be sure that send works properly in all cases and callback is called.\n              };\n\n              xdr.ontimeout = function () {\n                callback(0, \"timeout\");\n              }; // When using timeout value of 0, IE will not abort the request prematurely.\n\n\n              xdr.timeout = s.xdrTimeout || 0;\n              xdr.open(s.type, s.url);\n              xdr.send(s.hasContent && s.data || null);\n            },\n            abort: function () {\n              if (xdr) {\n                xdr.onerror = jQuery.noop;\n                xdr.abort();\n              }\n            }\n          };\n        }\n      });\n    }\n  })();\n  /**\r\n   * Function to set {toISOString} for {Date} objects if an older browser does not support it natively.\r\n   *\r\n   * See, http://stackoverflow.com/questions/11440569/converting-a-normal-date-to-iso-8601-format\r\n   *\r\n   * This function is called during the construction of this sigleton instance to make sure\r\n   * function is available.\r\n   */\n\n\n  (function () {\n    // Override only if native toISOString is not defined.\n    if (!Date.prototype.toISOString) {\n      // Rely on JSON serialization for dates because it matches\n      // the ISO standard. However, check if JSON serializer is present\n      // on a page and define own .toJSON method only if necessary.\n      if (!Date.prototype.toJSON) {\n        Date.prototype.toJSON = function (key) {\n          var pad = function (n) {\n            // Format integers to have at least two digits.\n            return n < 10 ? '0' + n : n;\n          };\n\n          return this.getUTCFullYear() + '-' + pad(this.getUTCMonth() + 1) + '-' + pad(this.getUTCDate()) + 'T' + pad(this.getUTCHours()) + ':' + pad(this.getUTCMinutes()) + ':' + pad(this.getUTCSeconds()) + 'Z';\n        };\n      }\n\n      Date.prototype.toISOString = Date.prototype.toJSON;\n    }\n  })();\n  /**\r\n   * See {@link #objectLength(object)} API function for description.\r\n   */\n\n\n  function objectLength(object) {\n    var length = 0;\n\n    if (object) {\n      if (_.isFunction(Object.keys)) {\n        // Notice, this only works in a new browsers such as IE9+.\n        // If support for older browsers is required, then implement\n        // counter by looping the keys of the object.\n        length = Object.keys(object).length;\n      } else {\n        for (var key in object) {\n          if (object.hasOwnProperty(key)) {\n            // Increase counter because property was found.\n            ++length;\n          }\n        }\n      }\n    }\n\n    return length;\n  }\n  /**\r\n   * Return Utils API as an object.\r\n   */\n\n\n  return {\n    /**\r\n     * Utils function to get the property count of the object.\r\n     *\r\n     * @param {Object} object Object whose properties are counted.\r\n     *                        May be {undefined} or {null}.\r\n     *                        Then, zero is returned for length.\r\n     * @return {int} Property count.\r\n     */\n    objectLength: function (object) {\n      return objectLength(object);\n    },\n\n    /**\r\n     * Encodes the given string if necessary.\r\n     *\r\n     * Like JavaScript encodeURIComponent(uri) but returns {undefined} or\r\n     * {null} if parameter was one of them.\r\n     *\r\n     * @param {String} str String to be encoded.\r\n     *                     May be {undefined} or {null}.\r\n     * @return {String} Encoded string if encoding was needed or original string.\r\n     *                  May return {undefined} or {null} if parameter\r\n     *                  was one of them.\r\n     */\n    encodeUriComponent: function (str) {\n      return str ? encodeURIComponent(str) : str;\n    },\n\n    /**\r\n     * Encodes the given string if necessary.\r\n     *\r\n     * Like JavaScript encodeURI(uri) but returns {undefined} or\r\n     * {null} if parameter was one of them.\r\n     *\r\n     * @param {String} str String to be encoded.\r\n     *                     May be {undefined} or {null}.\r\n     * @return {String} Encoded string if encoding was needed or original string.\r\n     *                  May return {undefined} or {null} if parameter\r\n     *                  was one of them.\r\n     */\n    encodeUri: function (str) {\n      return str ? encodeURI(str) : str;\n    },\n\n    /**\r\n     * Sort given string array in ascending way.\r\n     *\r\n     * @param {[]} strings Array whose string content will be sorted.\r\n     *                     May be {undefined} or {null}.\r\n     * @param {boolean} createCopy If {true}, content will be copied into a new array\r\n     *                             and the copy will be sorted. Else, given {strings} array\r\n     *                             is sorted directly.\r\n     * @return {[]} Sorted array. Notice, this is a shallow copy of the original if {createCopy} is {true}.\r\n     *              May be {undefined} or {null}.\r\n     */\n    sortStringArray: function (strings, createCopy) {\n      // Sorted array.\n      var sorted;\n\n      if (strings && _.isArray(strings)) {\n        if (createCopy) {\n          // Create shallow copy of the array.\n          sorted = [];\n\n          _.each(strings, function (element) {\n            sorted.push(element);\n          });\n        } else {\n          // Use given array for sort.\n          sorted = strings;\n        }\n\n        sorted.sort(function (a, b) {\n          // Default return value (no sorting).\n          var ret = 0;\n          var strA = a.toLowerCase();\n          var strB = b.toLowerCase(); // Ascending sort.\n\n          if (strA < strB) {\n            ret = -1;\n          } else if (strA > strB) {\n            ret = 1;\n          }\n\n          return ret;\n        });\n      }\n\n      return sorted;\n    }\n  };\n}();\n\nmodule.exports = Utils;","map":{"version":3,"sources":["C:/Users/Ossi Laurila/Desktop/weatherapp/node_modules/@fmidev/metolib/utils.js"],"names":["jQuery","require","_","Utils","method","noop","methods","length","console","browser","matched","uaMatch","ua","toLowerCase","match","exec","indexOf","version","navigator","userAgent","chrome","webkit","safari","window","XDomainRequest","ajaxTransport","s","crossDomain","async","timeout","xdrTimeout","xdr","send","complete","callback","status","statusText","responses","responseHeaders","onload","onerror","ontimeout","undefined","text","responseText","contentType","onprogress","open","type","url","hasContent","data","abort","Date","prototype","toISOString","toJSON","key","pad","n","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","objectLength","object","isFunction","Object","keys","hasOwnProperty","encodeUriComponent","str","encodeURIComponent","encodeUri","encodeURI","sortStringArray","strings","createCopy","sorted","isArray","each","element","push","sort","a","b","ret","strA","strB","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * This software may be freely distributed and used under the following MIT license:\r\n *\r\n * Copyright (c) 2017 Finnish Meteorological Institute\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this\r\n * software and associated documentation files (the \"Software\"), to deal in the\r\n * Software without restriction, including without limitation the rights to use,\r\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\r\n * Software, and to permit persons to whom the Software is furnished to do so,\r\n * subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\r\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\r\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\r\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF\r\n * CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\r\n * OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n */\r\n\r\n// Strict mode for whole file.\r\n\"use strict\";\r\n\r\n// Requires jQuery, lodash\r\nvar jQuery = require('jquery');\r\nvar _ = require('lodash');\r\n// import jQuery from 'jquery';\r\n// import _ from 'lodash';\r\n\r\n/**\r\n * Utils object provides API for general utility functions.\r\n *\r\n * There is no need to use {new} to create an instance of Utils.\r\n * Instead, use directly API functions provided by the object.\r\n */\r\nvar Utils = (function() {\r\n\r\n    /**\r\n     * Avoid console errors in browsers that lack a console.\r\n     *\r\n     * See: https://github.com/h5bp/html5-boilerplate/blob/master/js/plugins.js\r\n     */\r\n    (function() {\r\n        var method;\r\n        var noop = function() {\r\n        };\r\n        var methods = ['assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error', 'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log', 'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd', 'timeStamp', 'trace', 'warn'];\r\n        var length = methods.length;\r\n        var console = (console || {});\r\n\r\n        while (length--) {\r\n            method = methods[length];\r\n\r\n            // Only stub undefined methods.\r\n            if (!console[method]) {\r\n                console[method] = noop;\r\n            }\r\n        }\r\n    })();\r\n\r\n    /**\r\n     * Function to set jQuery.browser information.\r\n     * See, http://stackoverflow.com/questions/14545023/jquery-1-9-browser-detection\r\n     *\r\n     * This function is called during the construction of this sigleton instance to make sure\r\n     * browser information is available.\r\n     */\r\n    (function() {\r\n        if (!jQuery.browser) {\r\n            var matched, browser;\r\n\r\n            // Use of jQuery.browser is frowned upon.\r\n            // More details: http://api.jquery.com/jQuery.browser\r\n            // jQuery.uaMatch maintained for back-compat\r\n            jQuery.uaMatch = function(ua) {\r\n                ua = ua.toLowerCase();\r\n\r\n                var match = /(chrome)[ \\/]([\\w.]+)/.exec(ua) || /(webkit)[ \\/]([\\w.]+)/.exec(ua) || /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(ua) || /(msie) ([\\w.]+)/.exec(ua) || ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) || [];\r\n\r\n                return {\r\n                    browser : match[1] || \"\",\r\n                    version : match[2] || \"0\"\r\n                };\r\n            };\r\n\r\n            matched = jQuery.uaMatch(navigator.userAgent);\r\n            browser = {};\r\n\r\n            if (matched.browser) {\r\n                browser[matched.browser] = true;\r\n                browser.version = matched.version;\r\n            }\r\n\r\n            // Chrome is Webkit, but Webkit is also Safari.\r\n            if (browser.chrome) {\r\n                browser.webkit = true;\r\n\r\n            } else if (browser.webkit) {\r\n                browser.safari = true;\r\n            }\r\n\r\n            jQuery.browser = browser;\r\n        }\r\n    })();\r\n\r\n    /**\r\n     * This function is called during the construction of this sigleton\r\n     * instance to provide at least a limited support for cross-domain request (XDR)\r\n     * when jQuery.ajax is used for IE 8 and 9.\r\n     *\r\n     * IE 6, 7, 8, and 9 do not support XHR2 CORS.\r\n     * It is not possible to make generalized cross-domain requests in these browsers.\r\n     * IE 8, 9 support an ActiveX control called XDomainRequest that only allows limited\r\n     * cross-domain requests compared to XHR2 CORS. IE 10 supports XHR2 CORS.\r\n     *\r\n     * For more information about this, see following links:\r\n     *    https://github.com/jaubourg/ajaxHooks/blob/master/src/xdr.js\r\n     *    http://stackoverflow.com/questions/14309037/ajax-no-transport-error-in-ie-8-9\r\n     *    http://bugs.jquery.com/ticket/8283#comment:43\r\n     *    http://bugs.jquery.com/ticket/8283#comment:44\r\n     *    http://bugs.jquery.com/ticket/8283#comment:45\r\n     *\r\n     * jQuery does not include XDomainRequest support because there are numerous\r\n     * and serious limitations to XDR. Many reasonable $.ajax requests would fail,\r\n     * including any cross-domain request made on IE6 and IE7 which are otherwise\r\n     * supported by jQuery. Developers would be confused that their content types\r\n     * and headers were ignored, or that IE8 users could not use XDR if the user was\r\n     * using InPrivate browsing for example.\r\n     *\r\n     * Even the crippled XDR can be useful if it is used by a knowledgeable developer.\r\n     * A jQuery team member has made an XDR ajax transport available. You must be aware\r\n     * of XDR limitations by reading this blog post or ask someone who has dealt with\r\n     * XDR problems and can mentor you through its successful use.\r\n     *\r\n     * For further help and other solutions, ask on the jQuery Forum, StackOverflow,\r\n     * or search \"jQuery xdr transport\".\r\n     */\r\n    (function() {\r\n        if (window.XDomainRequest) {\r\n            jQuery.ajaxTransport(function(s) {\r\n                if (s.crossDomain && s.async) {\r\n                    if (s.timeout) {\r\n                        s.xdrTimeout = s.timeout;\r\n                        delete s.timeout;\r\n                    }\r\n                    var xdr;\r\n                    return {\r\n                        send : function(_, complete) {\r\n                            function callback(status, statusText, responses, responseHeaders) {\r\n                                xdr.onload = xdr.onerror = xdr.ontimeout = jQuery.noop;\r\n                                xdr = undefined;\r\n                                complete(status, statusText, responses, responseHeaders);\r\n                            }\r\n\r\n                            xdr = new XDomainRequest();\r\n                            xdr.onload = function() {\r\n                                callback(200, \"OK\", {\r\n                                    text : xdr.responseText\r\n                                }, \"Content-Type: \" + xdr.contentType);\r\n                            };\r\n                            xdr.onerror = function() {\r\n                                callback(404, \"Not Found\");\r\n                            };\r\n                            xdr.onprogress = function() {\r\n                                // For some reason, XDomainRequest send does not seem to work properly with IE9\r\n                                // when jQuery.noop is used for onprogress function and jQuery ajax requests are\r\n                                // called inside an iframe. Therefore, separately defined empty function is set\r\n                                // here to be sure that send works properly in all cases and callback is called.\r\n                            };\r\n                            xdr.ontimeout = function() {\r\n                                callback(0, \"timeout\");\r\n                            };\r\n                            // When using timeout value of 0, IE will not abort the request prematurely.\r\n                            xdr.timeout = s.xdrTimeout || 0;\r\n                            xdr.open(s.type, s.url);\r\n                            xdr.send((s.hasContent && s.data ) || null);\r\n                        },\r\n                        abort : function() {\r\n                            if (xdr) {\r\n                                xdr.onerror = jQuery.noop;\r\n                                xdr.abort();\r\n                            }\r\n                        }\r\n                    };\r\n                }\r\n            });\r\n        }\r\n    })();\r\n\r\n    /**\r\n     * Function to set {toISOString} for {Date} objects if an older browser does not support it natively.\r\n     *\r\n     * See, http://stackoverflow.com/questions/11440569/converting-a-normal-date-to-iso-8601-format\r\n     *\r\n     * This function is called during the construction of this sigleton instance to make sure\r\n     * function is available.\r\n     */\r\n    (function() {\r\n        // Override only if native toISOString is not defined.\r\n        if (!Date.prototype.toISOString) {\r\n            // Rely on JSON serialization for dates because it matches\r\n            // the ISO standard. However, check if JSON serializer is present\r\n            // on a page and define own .toJSON method only if necessary.\r\n            if (!Date.prototype.toJSON) {\r\n                Date.prototype.toJSON = function(key) {\r\n                    var pad = function(n) {\r\n                        // Format integers to have at least two digits.\r\n                        return n < 10 ? '0' + n : n;\r\n                    };\r\n\r\n                    return this.getUTCFullYear() + '-' + pad(this.getUTCMonth() + 1) + '-' + pad(this.getUTCDate()) + 'T' + pad(this.getUTCHours()) + ':' + pad(this.getUTCMinutes()) + ':' + pad(this.getUTCSeconds()) + 'Z';\r\n                };\r\n            }\r\n\r\n            Date.prototype.toISOString = Date.prototype.toJSON;\r\n        }\r\n    })();\r\n\r\n    /**\r\n     * See {@link #objectLength(object)} API function for description.\r\n     */\r\n    function objectLength(object) {\r\n        var length = 0;\r\n        if (object) {\r\n            if (_.isFunction(Object.keys)) {\r\n                // Notice, this only works in a new browsers such as IE9+.\r\n                // If support for older browsers is required, then implement\r\n                // counter by looping the keys of the object.\r\n                length = Object.keys(object).length;\r\n\r\n            } else {\r\n                for (var key in object) {\r\n                    if (object.hasOwnProperty(key)) {\r\n                        // Increase counter because property was found.\r\n                        ++length;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return length;\r\n    }\r\n\r\n    /**\r\n     * Return Utils API as an object.\r\n     */\r\n    return {\r\n\r\n        /**\r\n         * Utils function to get the property count of the object.\r\n         *\r\n         * @param {Object} object Object whose properties are counted.\r\n         *                        May be {undefined} or {null}.\r\n         *                        Then, zero is returned for length.\r\n         * @return {int} Property count.\r\n         */\r\n        objectLength : function(object) {\r\n            return objectLength(object);\r\n        },\r\n\r\n        /**\r\n         * Encodes the given string if necessary.\r\n         *\r\n         * Like JavaScript encodeURIComponent(uri) but returns {undefined} or\r\n         * {null} if parameter was one of them.\r\n         *\r\n         * @param {String} str String to be encoded.\r\n         *                     May be {undefined} or {null}.\r\n         * @return {String} Encoded string if encoding was needed or original string.\r\n         *                  May return {undefined} or {null} if parameter\r\n         *                  was one of them.\r\n         */\r\n        encodeUriComponent : function(str) {\r\n            return str ? encodeURIComponent(str) : str;\r\n        },\r\n\r\n        /**\r\n         * Encodes the given string if necessary.\r\n         *\r\n         * Like JavaScript encodeURI(uri) but returns {undefined} or\r\n         * {null} if parameter was one of them.\r\n         *\r\n         * @param {String} str String to be encoded.\r\n         *                     May be {undefined} or {null}.\r\n         * @return {String} Encoded string if encoding was needed or original string.\r\n         *                  May return {undefined} or {null} if parameter\r\n         *                  was one of them.\r\n         */\r\n        encodeUri : function(str) {\r\n            return str ? encodeURI(str) : str;\r\n        },\r\n\r\n        /**\r\n         * Sort given string array in ascending way.\r\n         *\r\n         * @param {[]} strings Array whose string content will be sorted.\r\n         *                     May be {undefined} or {null}.\r\n         * @param {boolean} createCopy If {true}, content will be copied into a new array\r\n         *                             and the copy will be sorted. Else, given {strings} array\r\n         *                             is sorted directly.\r\n         * @return {[]} Sorted array. Notice, this is a shallow copy of the original if {createCopy} is {true}.\r\n         *              May be {undefined} or {null}.\r\n         */\r\n        sortStringArray : function(strings, createCopy) {\r\n            // Sorted array.\r\n            var sorted;\r\n            if (strings && _.isArray(strings)) {\r\n                if (createCopy) {\r\n                    // Create shallow copy of the array.\r\n                    sorted = [];\r\n                    _.each(strings, function(element) {\r\n                        sorted.push(element);\r\n                    });\r\n\r\n                } else {\r\n                    // Use given array for sort.\r\n                    sorted = strings;\r\n                }\r\n\r\n                sorted.sort(function(a, b) {\r\n                    // Default return value (no sorting).\r\n                    var ret = 0;\r\n                    var strA = a.toLowerCase();\r\n                    var strB = b.toLowerCase();\r\n                    // Ascending sort.\r\n                    if (strA < strB) {\r\n                        ret = -1;\r\n\r\n                    } else if (strA > strB) {\r\n                        ret = 1;\r\n                    }\r\n                    return ret;\r\n                });\r\n            }\r\n            return sorted;\r\n        }\r\n    };\r\n\r\n})();\r\n\r\nmodule.exports = Utils;\r\n"]},"metadata":{},"sourceType":"script"}